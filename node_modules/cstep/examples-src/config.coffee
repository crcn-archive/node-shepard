cstep = require "../"

###
 simulated configuration class
###

class Config

	constructor: () ->
		@_source = {}

	load: cstep (next) ->
		console.log "load"
		setTimeout next, 500

	set: cstep (key, value, next) ->
		console.log "set %s:%s", key, value
		@_source[key] = value
		setTimeout next, 500

	

	save: cstep (next) ->
		console.log "save"
		setTimeout next, 500



new Config().load().set("hello", "world").save () ->
	console.log "DONE"